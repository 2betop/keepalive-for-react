import{jsx as e,jsxs as n}from"react/jsx-runtime";import*as t from"react";import{useState as r,useRef as c,useLayoutEffect as o,Fragment as u,memo as a,useImperativeHandle as i,useEffect as l}from"react";import{createPortal as s}from"react-dom";function d(n){var t=n.active,a=n.cache,i=n.children,l=n.name,d=n.renderDiv,f=r((function(){var e=document.createElement("div");return e.setAttribute("id",l),e.className="cache-component "+l+" "+(a?"cached":"no-cache"),e}))[0],m=c(!1);return m.current=m.current||t,o((function(){var e,n;if(t)null===(e=d.current)||void 0===e||e.appendChild(f);else try{null===(n=d.current)||void 0===n||n.removeChild(f)}catch(e){console.log(e,"removeChild error")}}),[t,d,f,i]),e(u,{children:m.current&&s(i,f)})}function f(e){return null==e}var m,p,v=a((function(t){var a=t.activeName,l=t.cache,s=t.children,m=t.exclude,p=t.include,v=t.maxLen,h=t.aliveRef,N=c(null),E=r([]),C=E[0],x=E[1];return i(h,(function(){return{getCaches:function(){return C},removeCache:function(e){setTimeout((function(){x((function(n){return n.filter((function(n){return n.name!==e}))}))}),0)},cleanAllCache:function(){x([])},cleanOtherCache:function(){x((function(e){return e.filter((function(e){return e.name===a}))}))}}}),[C,x,a]),o((function(){f(a)||x((function(e){return e.length>=(v||20)&&(e=e.slice(1,e.length)),m&&m.length>0&&(e=e.filter((function(e){var n=e.name;return!(null==m?void 0:m.includes(n))}))),p&&p.length>0&&(e=e.filter((function(e){var n=e.name;return null==p?void 0:p.includes(n)}))),e=e.filter((function(e){return e.cache})),f(e.find((function(e){return e.name===a})))&&e.push({cache:null==l||l,name:a,ele:s}),e}))}),[s,l,a,m,v,p]),n(u,{children:[e("div",{ref:N,className:"keep-alive"}),null==C?void 0:C.map((function(n){var t=n.name,r=n.cache,c=n.ele;return e(d,{cache:r,active:t===a,renderDiv:N,name:t,children:c},t)}))]})}));
/**
 * @remix-run/router v1.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h(e,n){if(!1===e||null==e)throw new Error(n)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(m||(m={})),function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));const N=["post","put","patch","delete"];new Set(N);const E=["get",...N];new Set(E);
/**
 * React Router v6.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
const C=t.createContext(null);"production"!==process.env.NODE_ENV&&(C.displayName="DataRouter");const x=t.createContext(null);"production"!==process.env.NODE_ENV&&(x.displayName="DataRouterState");const D=t.createContext(null);"production"!==process.env.NODE_ENV&&(D.displayName="Await");const y=t.createContext(null);"production"!==process.env.NODE_ENV&&(y.displayName="Navigation");const O=t.createContext(null);"production"!==process.env.NODE_ENV&&(O.displayName="Location");const R=t.createContext({outlet:null,matches:[],isDataRoute:!1});"production"!==process.env.NODE_ENV&&(R.displayName="Route");const g=t.createContext(null);function V(){return null==t.useContext(O)&&("production"!==process.env.NODE_ENV?h(!1,"useLocation() may be used only in the context of a <Router> component."):h(!1)),t.useContext(O).location}function _(e,n){void 0===n&&(n=!0);var t=c(null),r=V(),o=c(!1);return l((function(){var c,u;if(t.current){var a=null===(c=t.current)||void 0===c?void 0:c.parentElement;if(a)a.id===r.pathname+r.search&&(n?o.current&&(u=e()):u=e())}return o.current=!0,function(){u&&"function"==typeof u&&u()}}),[r]),t}"production"!==process.env.NODE_ENV&&(g.displayName="RouteError"),new Promise((()=>{}));export{v as default,_ as useOnActive};
//# sourceMappingURL=index.min.js.map
